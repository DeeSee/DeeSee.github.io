<!DOCTYPE html>
<html>
<head>
  <title></title>
  <style>
  body { font-size: 6em; padding-bottom: 40px; }
  #outer_foo { height: 150vh; background-color: lightblue; }
</style>
</head>
<body>
<div id="outer_foo">
  <div style="position: fixed; bottom: 40px; left: 0">
    <div id="foo" >Start</div>
    <div id="obscured_mode">Start</div>
  </div>
</div>
  <script>
    var d = document.getElementById('foo');
    var obscured_mode = document.getElementById('obscured_mode');
    obscured_mode.innerText = "Obscured state mode: " + window.YandexApplicationsAPIBackend.getObscuredStateMode();

    var oldState = window.YandexApplicationsAPIBackend.getPageState();
    d.innerText = oldState;
    window.YandexApplicationsAPIBackend.on('pageStateChanged', () => {
      var newState = window.YandexApplicationsAPIBackend.getPageState()
      d.innerText = oldState + " -> " + newState;
      oldState = newState;
    });
  </script>
</body>
</html>

